
                                    {searchQuery && (
                                        <button
                                            onClick={() => setSearchQuery('')}
                                            className="absolute right-4 top-4 h-5 w-5 text-gray-400 hover:text-gray-600"
                                        >
                                            ‚úï
                                        </button>
                                    )}
                                </div>
                                
                                {/* Search Type Toggle */}
                                <div className={`flex rounded-2xl p-1 ${darkMode ? 'bg-gray-700/50' : 'bg-white/50'}`}>
                                    <button
                                        onClick={() => setSearchType('book')}
                                        className={`flex-1 px-3 py-3 rounded-xl transition-all duration-300 text-sm font-medium ${
                                            searchType === 'book' 
                                                ? 'bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg' 
                                                : 'text-gray-500 hover:text-gray-700'
                                        }`}
                                    >
                                        üìö Books
                                    </button>
                                    <button
                                        onClick={() => setSearchType('author')}
                                        className={`flex-1 px-3 py-3 rounded-xl transition-all duration-300 text-sm font-medium ${
                                            searchType === 'author' 
                                                ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg' 
                                                : 'text-gray-500 hover:text-gray-700'
                                        }`}
                                    >
                                        ‚úçÔ∏è Authors
                                    </button>
                                </div>
                                
                                <select
                                    value={selectedGenre}
                                    onChange={(e) => setSelectedGenre(e.target.value)}
                                    className={`px-4 py-4 rounded-2xl border-2 transition-all duration-300 ${
                                        darkMode 
                                            ? 'bg-gray-700/50 border-gray-600 text-white focus:border-purple-400' 
                                            : 'bg-white/70 border-gray-200 focus:border-purple-400'
                                    } focus:outline-none focus:ring-4 focus:ring-purple-400/20`}
                                >
                                    {genres.map(genre => (
                                        <option key={genre} value={genre}>
                                            {genre === 'all' ? 'üîç All Genres' : `üìö ${genre.charAt(0).toUpperCase() + genre.slice(1)}`}
                                        </option>
                                    ))}
                                </select>
                                <button
                                    onClick={handleSearch}
                                    disabled={!searchQuery.trim()}
                                    className="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-6 py-4 rounded-2xl font-semibold transition-all duration-300 transform hover:scale-105 disabled:scale-100 shadow-lg hover:shadow-xl"
                                >
                                    <div className="flex items-center justify-center space-x-2">
                                        <span>üîç</span>
                                        <span>Search</span>
                                    </div>
                                </button>
                            </div>

                            {/* Search suggestions */}
                            <div className="mb-6">
                                <p className="text-sm text-gray-500 dark:text-gray-400 mb-2">üí° Try searching for:</p>
                                <div className="flex flex-wrap gap-2">
                                    {['Harry Potter', 'Lord of the Rings', 'Jane Austen', 'Stephen King', 'Science Fiction', 'Mystery'].map((suggestion) => (
                                        <button
                                            key={suggestion}
                                            onClick={() => {
                                                setSearchQuery(suggestion);
                                                setTimeout(() => handleSearch(), 100);
                                            }}
                                            className="px-3 py-1 bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-300 rounded-full text-xs hover:bg-purple-200 dark:hover:bg-purple-800/50 transition-colors"
                                        >
                                            {suggestion}
                                        </button>
                                    ))}
                                </div>
                            </div>

                            {/* File Upload */}
                            <div className="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0 md:space-x-6">
                                <label className={`flex-1 flex items-center justify-center space-x-3 cursor-pointer px-6 py-4 rounded-2xl border-2 border-dashed transition-all duration-300 hover:scale-105 ${
                                    darkMode 
                                        ? 'border-gray-600 hover:border-purple-400 bg-gray-700/30' 
                                        : 'border-gray-300 hover:border-purple-400 bg-white/30'
                                }`}>
                                    
                                </label>
                                {uploadedFile && (
                                    <div className="flex items-center space-x-2 text-green-500 font-medium">
                                        <span className="animate-pulse">‚ù§Ô∏è</span>
                                        <span>‚ú® {uploadedFile.name}</span>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Loading Animation */}
                        {loading && (
                            <div className="text-center py-12">
                                <div className="relative">
                                    <div className="animate-spin rounded-full h-16 w-16 border-4 border-purple-200 border-t-purple-600 mx-auto"></div>
                                    <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 h-6 w-6 text-purple-600 animate-pulse">üìö</div>
                                </div>
                                <p className="mt-6 text-lg font-medium">Analyzing literary treasures...</p>
                                <div className="flex justify-center space-x-1 mt-4">
                                    <div className="w-2 h-2 bg-purple-500 rounded-full animate-bounce"></div>
                                    <div className="w-2 h-2 bg-blue-500 rounded-full animate-bounce" style={{animationDelay: '0.1s'}}></div>
                                    <div className="w-2 h-2 bg-pink-500 rounded-full animate-bounce" style={{animationDelay: '0.2s'}}></div>
                                </div>
                            </div>
                        )}

                        {/* Search Results */}
                        {searchResults.length > 0 && !loading && (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                                <div className={`glassmorphism rounded-3xl shadow-2xl p-6`}>
                                    <h2 className="text-2xl font-bold mb-6 flex items-center">
                                        <div className="bg-gradient-to-r from-purple-500 to-blue-500 rounded-2xl p-3 mr-3">
                                            <span className="text-white">üìö</span>
                                        </div>
                                        Search Results
                                        <span className="ml-auto text-sm bg-gradient-to-r from-purple-500 to-pink-500 text-white px-3 py-1 rounded-full">
                                            {searchResults.length} found
                                        </span>
                                    </h2>
                                    <div className="space-y-4 max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-purple-500 scrollbar-track-gray-300">
                                        {searchResults.map((book, index) => (
                                            <div
                                                key={index}
                                                onClick={() => setSelectedBook(book)}
                                                className={`group p-5 rounded-2xl cursor-pointer transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl ${
                                                    selectedBook?.title === book.title
                                                        ? 'bg-gradient-to-r from-purple-500/20 to-blue-500/20 border-2 border-purple-400'
                                                        : darkMode ? 'bg-gray-700/50 hover:bg-gray-600/50' : 'bg-white/50 hover:bg-white/70'
                                                }`}
                                            >
                                                <div className="flex space-x-4">
                                                    {book.coverId && (
                                                        <img
                                                            src={getCoverUrl(book.coverId)}
                                                            alt={book.title}
                                                            className="w-16 h-20 object-cover rounded-lg shadow-md group-hover:shadow-lg transition-shadow duration-300"
                                                            onError={(e) => e.target.style.display = 'none'}
                                                        />
                                                    )}
                                                    <div className="flex-1 min-w-0">
                                                        <h3 className="font-bold text-lg truncate group-hover:text-purple-600 transition-colors duration-300">
                                                            {book.title}
                                                        </h3>
                                                        <p className="text-sm opacity-75 mb-2">by {book.author}</p>
                                                        <div className="flex flex-wrap gap-2 mb-2">
                                                            {book.subjects?.slice(0, 2).map((subject, idx) => (
                                                                <span key={idx} className="text-xs px-2 py-1 bg-purple-100 dark:bg-purple-900/50 text-purple-600 rounded-full">
                                                                    {subject}
                                                                </span>
                                                            ))}
                                                        </div>
                                                        <div className="flex items-center justify-between">
                                                            <div className="flex items-center space-x-4 text-sm">
                                                                <span className="flex items-center">
                                                                    <span className="mr-1">üìÖ</span>
                                                                    {book.year}
                                                                </span>
                                                                <span className="flex items-center text-yellow-500">
                                                                    <span className="mr-1">‚≠ê</span>
                                                                    {book.rating}/5
                                                                </span>
                                                            </div>
                                                            <div className="flex items-center space-x-2">
                                                                <div className="text-xs text-purple-600 font-medium">
                                                                    {book.popularity}% popular
                                                                </div>
                                                                {book.searchType && (
                                                                    <span className={`text-xs px-2 py-1 rounded-full ${
                                                                        book.searchType === 'author' 
                                                                            ? 'bg-pink-100 text-pink-600 dark:bg-pink-900/50 dark:text-pink-300'
                                                                            : 'bg-blue-100 text-blue-600 dark:bg-blue-900/50 dark:text-blue-300'
                                                                    }`}>
                                                                        {book.searchType === 'author' ? '‚úçÔ∏è Author' : 'üìö Book'}
                                                                    </span>
                                                                )}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Export Options */}
                                <div className={`glassmorphism rounded-3xl shadow-2xl p-6`}>
                                    <h2 className="text-2xl font-bold mb-6 flex items-center">
                                        <div className="bg-gradient-to-r from-green-500 to-teal-500 rounded-2xl p-3 mr-3">
                                            <span className="text-white">üì•</span>
                                        </div>
                                        Export Analytics
                                    </h2>
                                    <div className="space-y-4">
                                        <button
                                            onClick={exportToPDF}
                                            className="w-full bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-6 py-4 rounded-2xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"
                                        >
                                            <span>üì•</span>
                                            <span>üìÑ Export Detailed PDF Report</span>
                                        </button>
                                        <button
                                            onClick={exportToCSV}
                                            className="w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-6 py-4 rounded-2xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2"
                                        >
                                            <span>üìä</span>
                                            <span>üìä Export Data as CSV</span>
                                        </button>
                                        <div className={`p-4 rounded-2xl ${darkMode ? 'bg-gray-700/50' : 'bg-gray-100/50'}`}>
                                            <h4 className="font-semibold mb-2">üìà Export includes:</h4>
                                            <ul className="text-sm space-y-1 opacity-75">
                                                <li>‚Ä¢ Demographic analysis</li>
                                                <li>‚Ä¢ Regional popularity data</li>
                                                <li>‚Ä¢ SHAP value explanations</li>
                                                <li>‚Ä¢ Reading patterns & trends</li>
                                                <li>‚Ä¢ Emotional impact scores</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Analytics Section */}
                        {(selectedBook || searchMode === 'enhanced') && (
                            <div className="space-y-8">
                                {/* Book Details Card */}
                                {selectedBook && (
                                    <div className={`glassmorphism rounded-3xl shadow-2xl p-8`}>
                                        <div className="flex flex-col lg:flex-row space-y-6 lg:space-y-0 lg:space-x-8">
                                           
                                            <div className="flex-1">
                                                <h2 className="text-4xl font-bold mb-2 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
                                                    {selectedBook.title}
                                                </h2>
                                                <p className="text-xl opacity-75 mb-6">by {selectedBook.author}</p>
                                                
                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                    <div className="space-y-4">
                                                        <div className="flex items-center space-x-3">
                                                            <span className="text-purple-500">üìÖ</span>
                                                            <span><strong>Published:</strong> {selectedBook.year}</span>
                                                        </div>
                                                        <div className="flex items-center space-x-3">
                                                            <span className="text-yellow-500">‚≠ê</span>
                                                            <span><strong>Rating:</strong> {selectedBook.rating}/5</span>
                                                        </div>
                                                        <div className="flex items-center space-x-3">
                                                            <span className="text-blue-500">üìñ</span>
                                                            <span><strong>Pages:</strong> {selectedBook.pages || 'N/A'}</span>
                                                        </div>
                                                    </div>
                                                    <div className="space-y-4">
                                                        <div className="flex items-center space-x-3">
                                                            <span className="text-green-500">üìà</span>
                                                            <span><strong>Popularity:</strong> {selectedBook.popularity}%</span>
                                                        </div>
                                                        <div className="flex items-center space-x-3">
                                                            <span className="text-indigo-500">üë§</span>
                                                            <span><strong>Publisher:</strong> {selectedBook.publisher}</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                {selectedBook.subjects && selectedBook.subjects.length > 0 && (
                                                    <div className="mt-6">
                                                        <h4 className="font-semibold mb-3">üìö Subjects & Themes:</h4>
                                                        <div className="flex flex-wrap gap-2">
                                                            {selectedBook.subjects.slice(0, 6).map((subject, idx) => (
                                                                <span key={idx} className="px-3 py-2 bg-gradient-to-r from-purple-500/20 to-blue-500/20 text-purple-600 dark:text-purple-300 rounded-full text-sm font-medium border border-purple-200 dark:border-purple-700">
                                                                    {subject}
                                                                </span>
                                                            ))}
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* Analytics Grid */}
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    {/* Demographics */}
                                    <div className={`glassmorphism rounded-3xl shadow-2xl p-6`}>
                                        <h3 className="text-xl font-bold mb-6 flex items-center">
                                            <div className="bg-gradient-to-r from-pink-500 to-rose-500 rounded-2xl p-2 mr-3">
                                                <span className="text-white">üë•</span>
                                            </div>
                                            Reader Demographics & Emotional Impact
                                        </h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div className="text-center">
                                                <h4 className="font-semibold mb-4">Demographics</h4>
                                                <div className="space-y-2">
                                                    <div className="flex justify-between">
                                                        <span>Male:</span>
                                                        <span className="font-bold">{enhancedMockData.demographics.male}%</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Female:</span>
                                                        <span className="font-bold">{enhancedMockData.demographics.female}%</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Teens:</span>
                                                        <span className="font-bold">{enhancedMockData.demographics.teens}%</span>
                                                    </div>
                                                    <div className="flex justify-between">
                                                        <span>Adults:</span>
                                                        <span className="font-bold">{enhancedMockData.demographics.adults}%</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="text-center">
                                                <h4 className="font-semibold mb-4">Emotional Impact</h4>
                                                <div className="space-y-2">
                                                    {enhancedMockData.emotionalImpact.slice(0, 4).map((emotion, idx) => (
                                                        <div key={idx} className="flex justify-between">
                                                            <span>{emotion.emotion}:</span>
                                                            <span className="font-bold">{emotion.value}%</span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Regional Popularity */}
                                    <div className={`glassmorphism rounded-3xl shadow-2xl p-6`}>
                                        <h3 className="text-xl font-bold mb-6 flex items-center">
                                            <div className="bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl p-2 mr-3">
                                                <span className="text-white">üåç</span>
                                            </div>
                                            Global Reading Patterns
                                        </h3>
                                        <div className="space-y-3">
                                            {enhancedMockData.regionalPopularity.map((region, idx) => (
                                                <div key={idx} className="flex items-center justify-between">
                                                    <span className="font-medium">{region.country}</span>
                                                    <div className="flex items-center space-x-2">
                                                        <div className="w-24 bg-gray-200 rounded-full h-2">
                                                            <div 
                                                                className="bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full" 
                                                                style={{width: `${region.popularity}%`}}
                                                            ></div>
                                                        </div>
                                                        <span className="text-sm font-bold">{region.popularity}%</span>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Reading Patterns */}
                                    <div className={`glassmorphism rounded-3xl shadow-2xl p-6`}>
                                        <h3 className="text-xl font-bold mb-6 flex items-center">
                                            <div className="bg-gradient-to-r from-green-500 to-teal-500 rounded-2xl p-2 mr-3">
                                                <span className="text-white">üìà</span>
                                            </div>
                                            Daily Reading Patterns
                                        </h3>
                                        <div className="space-y-3">
                                            {enhancedMockData.readingPatterns.map((pattern, idx) => (
                                                <div key={idx} className="flex items-center justify-between">
                                                    <span className="font-medium">{pattern.time}</span>
                                                    <div className="flex items-center space-x-2">
                                                        <div className="w-24 bg-gray-200 rounded-full h-2">
                                                            <div 
                                                                className="bg-gradient-to-r from-green-500 to-teal-500 h-2 rounded-full" 
                                                                style={{width: `${(pattern.readers / 100) * 100}%`}}
                                                            ></div>
                                                        </div>
                                                        <span className="text-sm font-bold">{pattern.readers}%</span>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Seasonal Trends */}
                                    <div className={`glassmorphism rounded-3xl shadow-2xl p-6`}>
                                        <h3 className="text-xl font-bold mb-6 flex items-center">
                                            <div className="bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl p-2 mr-3">
                                                <span className="text-white">üìä</span>
                                            </div>
                                            Seasonal Reading Trends
                                        </h3>
                                        <div className="space-y-3">
                                            {enhancedMockData.seasonalTrends.map((trend, idx) => (
                                                <div key={idx} className="flex items-center justify-between">
                                                    <span className="font-medium">{trend.month}</span>
                                                    <div className="flex items-center space-x-2">
                                                        <div className="w-24 bg-gray-200 rounded-full h-2">
                                                            <div 
                                                                className="bg-gradient-to-r from-orange-500 to-red-500 h-2 rounded-full" 
                                                                style={{width: `${trend.popularity}%`}}
                                                            ></div>
                                                        </div>
                                                        <span className="text-sm font-bold">{trend.popularity}%</span>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Footer */}
                        <footer className={`mt-12 glassmorphism rounded-3xl shadow-2xl p-8`}>
                            <div className="grid grid-cols-1 md:grid-cols-4 gap-6 text-center">
                                <div>
                                    <div className="text-3xl font-bold text-purple-600 mb-2">{apiBooks.length || 0}</div>
                                    <div className="text-sm opacity-75">Books Analyzed</div>
                                </div>
                                <div>
                                    <div className="text-3xl font-bold text-blue-600 mb-2">50K+</div>
                                    <div className="text-sm opacity-75">Active Readers</div>
                                </div>
                                <div>
                                    <div className="text-3xl font-bold text-green-600 mb-2">95%</div>
                                    <div className="text-sm opacity-75">Accuracy Rate</div>
                                </div>
                                <div>
                                    <div className="text-3xl font-bold text-pink-600 mb-2">24/7</div>
                                    <div className="text-sm opacity-75">Real-time Updates</div>
                                </div>
                            </div>
                            <div className="text-center mt-6 pt-6 border-t border-gray-300 dark:border-gray-600">
                                <p className="text-sm opacity-75">
                                    <span className="text-purple-600"> Made by Palika Ghai üíï</span>
                                    <span className="text-purple-600"> Will be adding more features</span>
                                </p>
                            </div>
                        </footer>
                    </div>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<BookSearchInterface />, document.getElementById('root'));
    </script>
</body>

</html> 






























































